# File System

컴퓨터에서 파일, 데이터를 쉽게 찾을 수 있도록 유지 관리하는 방법

* 특징

  * 커널 영역에서 동작

  * 파일 CRUD 기능 원활하게 수행하기 위함

  * 계층적 디렉토리 구조

  * 디스크 파티션 별로 하나씩 둘 수 있음

* 역할
  * 파일 관리
  * 보조 저장소 관리
  * 파일 무결성 메커니즘
  * 접근 방법 제공
* 개발 목적
  * 하드디스크, 메인 메모리 속도 차이 줄이기 위함
  * 파일 관리
  * 하드디스크 용량 효율적 이용
* 구조
  * 메타영역: 데이터 영역에 기록되 파일 이름, 위치, 크기, 시간, 삭제유무 등 파일 정보
  * 데이터영역: 파일 데이터

#### 접근 방식

1. 순차 접근

   가장 간단, 대부분 `read`, `write` 연산

   현재 위치 가리키는 포인터에서 `System Call` 발생 시 포인터를 앞으로 보내면서 `read`와 `write` 진행

   뒤로 돌아갈 때는 지정한 `offset`만큼 되감기 해야 함 (테이프 모델 기반)

2. 직접 접근

   특별한 순서X, 빠르게 레코드 `read`, `write`

   현재 위치 가리키는 cp 변수만 유지하면서 직접 접근 파일을 가지고 순차 파일 기능 쉽게 구현 가능

   무작위 파일 블록에 대한 임의 접근 허용, 순서 제약 없음

   대규모 정보 접근 시 유용, `데이터베이스`에 활용

3. 기타 접근

   직접 접근 파일에 기반해서 인덱스 구축

#### 디렉토리와 디스크 구조

1. **1단계 디렉토리**

   가장 간단

   파일들 서로 유일한 이름 가지며, 서로 다른 사용자여도 같은 이름 사용 불가

2. **2단계 디렉토리**

   사용자마다 개별 디렉토리 만듦

   `UFD` : 자신만의 사용자 파일 디렉토리

   `MFD` : 사용자 이름과 계정번호로 인덱스 되어 있는 디렉토리

3. **트리 구조 디렉토리**

   2단계 구조를 확장한 다단계 트리 구조

   한 비트 활용해서 일반파일(0)인지 디렉토리파일(1)인지 구분

4. **그래프 구조 디렉토리**

   순환 발생하지 않도록 하위 디렉토리가 아닌 파일에 대한 링크만 허용하거나 GC를 이용해서 전체 파일 시스템 순회하고 접근 가능한 모든 것 표시

   링크 있으면 우회해서 순환 피할 수 있음

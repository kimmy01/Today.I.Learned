# Semaphore & Mutex

공유된 자원에 여러 프로세스 동시에 접근하면서 문제 발생 가능

이 때 공유된 자원의 데이터는 한 번에 하나의 프로세스만 접근할 수 있도록 제한을 둬야 함

`Semaphore` 멀티 프로그래밍 환경에서 공유 자원에 대한 접근 제한하는 방법

`임계구역(Critical Section)` 여러 프로세스가 데이터를 공유하며 수행될 때, **각 프로세스에서 공유 데이터를 접근하는 프로그램 코드 부분**

한 프로세스가 임계구역 수행할 때는 다른 프로세스가 접근하지 못하도록 해야 함

#### Semaphore P, V 연산

`P` : 임계 구역 들어가기 전 수행 (프로세스 진입 여부를 자원 개수(S) 통해서 결정)

`V` : 임계 구역 나올 때 수행 (자원 반납 알림, 대기 중인 프로세스 깨우는 신호)

```
P(S);
// 임계구역
V(S);
```

 ```
procedure P(S)
	while S = 0 do wait
	S := S-1
end P

// 임계 구역

procedure V(S)
	S := S+1
end V
 ```

한 프로세스가 P 또는 V 수행하는 동안 프로세스가 인터럽트 당하지 않게 됨

P와 V를 사용해서 임계 구역에 대한 상호 배제 구현이 가능

#### Mutex

임계 구역을 가진 스레드들의 실행시간이 서로 겹치지 않고 각각 단독으로 실행되게 하는 기술 (이진 세마포어)

해당 접근을 조율하기 위해 lock과 unlock을 사용

`lock` : 현재 임계 구역에 들어갈 권한을 얻어옴 (만약 다른 프로세스 / 스레드가 임계 구역 수행 중이면 종료할 때까지 대기)

`unlock` : 현재 임계 구역을 모두 사용했음 알림 (대기 중인 다른 프로세스 / 스레드가 임계 구역에 진입 가능)


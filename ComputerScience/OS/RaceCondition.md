# Race Condition

공유 자원에 대해서 여러 개의 프로세스가 동시에 접근할 때 결과값에 영향을 줄 수 있는 상태

=> 자료의 일관성을 해치게 됨

#### Race Condition 발생 이유

1. **커널 작업을 수행하는 중 인터럽트 발생**

   `문제` : 커널모드에서 데이터를 로드해 작업 수행하다가 인터럽트가 발생해서 같은 데이터를 조작하는 경우

   `해결` : 커널모드에서 작업을 수행하는 동안 **인터럽트를 disable** 시켜 CPU 제어권을 가져가지 못하도록 함

2. **프로세스가 System Call 해서 커널모드로 진입해서 작업 수행 중에 Context Switching 발생**

   `문제` : 프로세스1이 커널모드에서 데이터를 조작하는 도중, 시간이 초과되어 CPU 제어권이 프로세스2로 넘어가 같은 데이터를 조작하는 경우 (프로세스2가 작업에 반영되지 않음)

   `해결` : 프로세스가 커널모드에서 작업하는 경우에는 **시간이 초과되어도 CPU 제어권이 다른 프로세스에게 넘어가지 않도록** 함

3. **멀티 프로세서 환경에서 공유 메모리 내의 커널 데이터에 접근할 때**

​		`문제` : 멀티 프로세서 환경에서 2개의 CPU가 동시에 커널 내부 공유 데이터에 접근해서 조작하는 경우

​		`해결` : 커널 내부에 있는 **각 공유 데이터에 접근할 때마다, 그 데이터에 대한 lock/unlock** 하는 방법
